{"version":3,"sources":["hooks/redux.ts","http/index.ts","services/AuthService.ts","services/UserService.ts","store/slices/actionSlice.ts","store/slices/userSlice.ts","store/slices/ActionCreators.ts","constants.ts","components/EndBonusDialog.tsx","components/EndDialog.tsx","pages/EndPage.tsx","components/Game.tsx","components/Login.tsx","components/Menu.tsx","components/App.tsx","store/store.ts","index.tsx"],"names":["useAppDispatch","useDispatch","useAppSelector","useSelector","API_URL","$api","axios","create","withCredentials","baseURL","interceptors","request","use","config","headers","Authorization","concat","localStorage","getItem","response","async","originalRequest","error","status","_isRetry","get","setItem","data","accessToken","e","console","log","AuthService","login","name","password","post","registration","logout","refresh","UserService","fetchUsers","postUserMoney","money","postUserData","setBonusFlag","flag","actionSlice","createSlice","initialState","isGame","isLoading","isAuth","reducers","setAuth","state","action","payload","setGame","setLoading","userSlice","user","setUser","setUserMoney","actions","_error$response5","_error$response5$data","isAxiosError","message","CANVAS_WIDTH","CANVAS_HEIGHT","CLOUDS","Image","src","BIRD","GROUND","PIPE_WIDTH","PIPE_GAP","buttonMenuBg","fontWeight","height","margin","backgroundColor","color","EndBonusDialog","props","labels","inputs","setInputs","useState","Array","from","length","_","index","label","value","dispatch","_jsxs","Dialog","open","showDialog","disableEscapeKeyDown","children","DialogContent","_jsx","DialogContentText","id","map","input","TextField","autoFocus","type","fullWidth","onChange","event","handleChange","newInputs","target","DialogActions","Button","style","onClick","handleSubmitClick","_error$response6","_error$response6$data","_error$response7","_error$response7$data","window","location","href","EndDialog","score","bestScore","handleToMainMenuClick","handleRetryClick","reload","EndPage","_ref","showModal","bonusFlag","groundX","birdY","birdYSpeed","pipeGapBottomY","pipeX","constants","parseInt","checkCollision","circle","rect","x","radius","width","y","hasStarted","hasFinished","canGetScore","Game","setShowModal","canvas","useRef","jump","useEventListener","key","code","useEffect","current","context","getContext","setInterval","touchedPipe","birdHitbox","birdX","lowerPipe","toString","fillStyle","fillRect","drawImage","draw","Math","random","font","fillText","onKeyPress","ref","Login","setName","setPassword","navigate","useNavigate","display","flexDirection","alignItems","variant","gap","marginBottom","justifyContent","marginTop","handleLogin","_error$response","_error$response$data","handleRegistration","_error$response2","_error$response2$data","Menu","maxWidth","padding","Typography","fontSize","textAlign","Grid","container","spacing","item","xs","handleGameClick","handleLogout","removeItem","_error$response3","_error$response3$data","App","_error$response4","_error$response4$data","BrowserRouter","basename","Routes","_Fragment","Route","path","element","rootReducer","combineReducers","store","configureStore","reducer","document","getElementById","createRoot","render","Provider"],"mappings":"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","file":"static/js/main.83bdd6c6.chunk.js","sourcesContent":["import { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux'\r\nimport { AppDispatch, RootState } from '../store/store'\r\n\r\nexport const useAppDispatch = () => useDispatch<AppDispatch>()\r\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector\r\n","import axios from 'axios'\r\nimport { AuthResponse } from '../models/response/AuthResponse'\r\n\r\nexport const API_URL = `http://localhost:5000/api`\r\n\r\nconst $api = axios.create({\r\n\twithCredentials: true,\r\n\tbaseURL: API_URL,\r\n})\r\n\r\n$api.interceptors.request.use(config => {\r\n\tconfig.headers.Authorization = `Bearer ${localStorage.getItem('token')}`\r\n\treturn config\r\n})\r\n\r\n$api.interceptors.request.use(config => {\r\n\tconfig.headers.Authorization = `Bearer ${localStorage.getItem('token')}`\r\n\treturn config\r\n})\r\n\r\n$api.interceptors.response.use(\r\n\tconfig => {\r\n\t\treturn config\r\n\t},\r\n\tasync error => {\r\n\t\tconst originalRequest = error.config\r\n\t\tif (\r\n\t\t\t// eslint-disable-next-line eqeqeq\r\n\t\t\terror.response.status == 401 &&\r\n\t\t\terror.config &&\r\n\t\t\t!error.config._isRetry\r\n\t\t) {\r\n\t\t\toriginalRequest._isRetry = true\r\n\t\t\ttry {\r\n\t\t\t\tconst response = await axios.get<AuthResponse>(`${API_URL}/refresh`, {\r\n\t\t\t\t\twithCredentials: true,\r\n\t\t\t\t})\r\n\t\t\t\tlocalStorage.setItem('token', response.data.accessToken)\r\n\t\t\t\treturn $api.request(originalRequest)\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log('НЕ АВТОРИЗОВАН')\r\n\t\t\t}\r\n\t\t}\r\n\t\tthrow error\r\n\t}\r\n)\r\n\r\nexport default $api\r\n","import { AxiosResponse } from 'axios'\r\nimport $api from '../http'\r\nimport { AuthResponse } from '../models/response/AuthResponse'\r\n\r\nexport default class AuthService {\r\n\tstatic async login(\r\n\t\tname: string,\r\n\t\tpassword: string\r\n\t): Promise<AxiosResponse<AuthResponse>> {\r\n\t\treturn $api.post<AuthResponse>('/login', { name, password })\r\n\t}\r\n\r\n\tstatic async registration(\r\n\t\tname: string,\r\n\t\tpassword: string\r\n\t): Promise<AxiosResponse<AuthResponse>> {\r\n\t\treturn $api.post<AuthResponse>('/registration', { name, password })\r\n\t}\r\n\r\n\tstatic async logout(): Promise<void> {\r\n\t\treturn $api.post('/logout')\r\n\t}\r\n\r\n\tstatic async refresh(): Promise<AxiosResponse<AuthResponse>> {\r\n\t\treturn $api.get<AuthResponse>('/refresh')\r\n\t}\r\n}\r\n","import { AxiosResponse } from 'axios'\r\nimport $api from '../http'\r\nimport { Data, User } from '../models/User'\r\n\r\nexport default class UserService {\r\n\tstatic async fetchUsers(): Promise<AxiosResponse<User[]>> {\r\n\t\treturn $api.get<User[]>('/users')\r\n\t}\r\n\r\n\tstatic async postUserMoney(\r\n\t\tname: string,\r\n\t\tmoney: number\r\n\t): Promise<AxiosResponse<User>> {\r\n\t\treturn $api.post<User>('/money', { name, money })\r\n\t}\r\n\r\n\tstatic async postUserData(\r\n\t\tname: string,\r\n\t\tdata: Data\r\n\t): Promise<AxiosResponse<User>> {\r\n\t\treturn $api.post<User>('/data', { name, data })\r\n\t}\r\n\r\n\tstatic async setBonusFlag(\r\n\t\tname: string,\r\n\t\tflag: boolean\r\n\t): Promise<AxiosResponse<User>> {\r\n\t\treturn $api.post<User>('/flag', { name, flag })\r\n\t}\r\n}\r\n","import { createSlice } from '@reduxjs/toolkit'\r\nimport { ActionState } from '../../types'\r\n\r\nconst initialState: ActionState = {\r\n\tisGame: false,\r\n\tisLoading: false,\r\n\tisAuth: false,\r\n}\r\n\r\nexport const actionSlice = createSlice({\r\n\tname: 'action',\r\n\tinitialState: initialState,\r\n\treducers: {\r\n\t\tsetAuth(state, action) {\r\n\t\t\tstate.isAuth = action.payload\r\n\t\t},\r\n\t\tsetGame(state, action) {\r\n\t\t\tstate.isGame = action.payload\r\n\t\t},\r\n\t\tsetLoading(state, action) {\r\n\t\t\tstate.isLoading = action.payload\r\n\t\t},\r\n\t},\r\n})\r\n\r\nexport default actionSlice.reducer\r\n","import { createSlice } from '@reduxjs/toolkit'\r\nimport { UserState } from '../../types'\r\n\r\nconst initialState: UserState = {\r\n\tuser: null,\r\n}\r\n\r\nexport const userSlice = createSlice({\r\n\tname: 'user',\r\n\tinitialState: initialState,\r\n\treducers: {\r\n\t\tsetUser(state, action) {\r\n\t\t\tstate.user = action.payload\r\n\t\t},\r\n\t\tsetUserMoney(state, action) {\r\n\t\t\tif (state.user) {\r\n\t\t\t\tstate.user.money = action.payload\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n})\r\n\r\nexport default userSlice.reducer\r\n","import axios from 'axios'\r\nimport { API_URL } from '../../http'\r\nimport { Data, User } from '../../models/User'\r\nimport { AuthResponse } from '../../models/response/AuthResponse'\r\nimport AuthService from '../../services/AuthService'\r\nimport UserService from '../../services/UserService'\r\nimport { AppDispatch } from '../store'\r\nimport { actionSlice } from './actionSlice'\r\nimport { userSlice } from './userSlice'\r\n\r\nconst { setUser } = userSlice.actions\r\nconst { setAuth } = actionSlice.actions\r\n\r\nexport const login =\r\n\t(name: string, password: string) => async (dispatch: AppDispatch) => {\r\n\t\ttry {\r\n\t\t\tconst response = await AuthService.login(name, password)\r\n\t\t\tlocalStorage.setItem('token', response.data.accessToken)\r\n\t\t\tdispatch(setAuth(true))\r\n\t\t\tdispatch(setUser(response.data.user))\r\n\t\t} catch (error: unknown) {\r\n\t\t\tif (axios.isAxiosError(error)) {\r\n\t\t\t\tconsole.log(error.response?.data?.message)\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log('Unknown error occurred')\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\nexport const registration =\r\n\t(name: string, password: string) => async (dispatch: AppDispatch) => {\r\n\t\ttry {\r\n\t\t\tconst response = await AuthService.registration(name, password)\r\n\t\t\tlocalStorage.setItem('token', response.data.accessToken)\r\n\t\t\tdispatch(setAuth(true))\r\n\t\t\tdispatch(setUser(response.data.user))\r\n\t\t} catch (error: unknown) {\r\n\t\t\tif (axios.isAxiosError(error)) {\r\n\t\t\t\tconsole.log(error.response?.data?.message)\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log('Unknown error occurred')\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\nexport const logout = () => async (dispatch: AppDispatch) => {\r\n\ttry {\r\n\t\tAuthService.logout()\r\n\t\tlocalStorage.removeItem('token')\r\n\t\tdispatch(setAuth(false))\r\n\t\tdispatch(setUser({} as User))\r\n\t} catch (error: unknown) {\r\n\t\tif (axios.isAxiosError(error)) {\r\n\t\t\tconsole.log(error.response?.data?.message)\r\n\t\t} else {\r\n\t\t\tconsole.log('Unknown error occurred')\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const checkAuth = () => async (dispatch: AppDispatch) => {\r\n\ttry {\r\n\t\tconst response = await axios.get<AuthResponse>(`${API_URL}/refresh`, {\r\n\t\t\twithCredentials: true,\r\n\t\t})\r\n\t\tlocalStorage.setItem('token', response.data.accessToken)\r\n\t\tdispatch(setAuth(true))\r\n\t\tdispatch(setUser(response.data.user))\r\n\t} catch (error: unknown) {\r\n\t\tif (axios.isAxiosError(error)) {\r\n\t\t\tconsole.log(error.response?.data?.message)\r\n\t\t} else {\r\n\t\t\tconsole.log('Unknown error occurred')\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const postUserMoney =\r\n\t(name: string, money: number) => async (dispatch: AppDispatch) => {\r\n\t\ttry {\r\n\t\t\tawait UserService.postUserMoney(name, money)\r\n\t\t} catch (error: unknown) {\r\n\t\t\tif (axios.isAxiosError(error)) {\r\n\t\t\t\tconsole.log(error.response?.data?.message)\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log('Unknown error occurred')\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\nexport const postUserData =\r\n\t(name: string, data: Data) => async (dispatch: AppDispatch) => {\r\n\t\ttry {\r\n\t\t\tawait UserService.postUserData(name, data)\r\n\t\t} catch (error: unknown) {\r\n\t\t\tif (axios.isAxiosError(error)) {\r\n\t\t\t\tconsole.log(error.response?.data?.message)\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log('Unknown error occurred')\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\nexport const setBonusFlag =\r\n\t(name: string, flag: boolean) => async (dispatch: AppDispatch) => {\r\n\t\ttry {\r\n\t\t\tawait UserService.setBonusFlag(name, flag)\r\n\t\t} catch (error: unknown) {\r\n\t\t\tif (axios.isAxiosError(error)) {\r\n\t\t\t\tconsole.log(error.response?.data?.message)\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log('Unknown error occurred')\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n","export const INTERVAL = 20\nexport const CANVAS_WIDTH = 300\nexport const CANVAS_HEIGHT = 450\n\n// clouds\nexport const CLOUDS = new Image()\nCLOUDS.src = './images/clouds.png'\nexport const CLOUDS_HEIGHT = 280\nexport const CLOUDS_WIDTH = 300\nexport const CLOUDS_X = 0\nexport const CLOUDS_Y = 0\n\n// bird\nexport const BIRD = new Image()\nBIRD.src = './images/bird.png'\nexport const BIRD_HEIGHT = 50\nexport const BIRD_WIDTH = 50\n\n// ground\nexport const GROUND = new Image()\nGROUND.src = './images/ground.png'\nexport const GROUND_HEIGHT = 200\nexport const GROUND_WIDTH = CANVAS_WIDTH\nexport const GROUND_Y = CANVAS_HEIGHT - GROUND_HEIGHT\nexport const HEIGHT_GROUND = 59\n\n// pipes\nexport const PIPE_WIDTH = 40\nexport const PIPE_HEIGHT = CANVAS_HEIGHT / 2\nexport const PIPE_GAP = CANVAS_HEIGHT / 2 - HEIGHT_GROUND - 50\n\n// movements\nexport const JUMP_SPEED = -200\nexport const FALL_SPEED = -800\nexport const SPEED = 2\n","import {\r\n\tButton,\r\n\tDialog,\r\n\tDialogActions,\r\n\tDialogContent,\r\n\tDialogContentText,\r\n\tTextField,\r\n} from '@material-ui/core'\r\nimport { useState } from 'react'\r\nimport { useAppDispatch, useAppSelector } from '../hooks/redux'\r\nimport { Data } from '../models/User'\r\nimport {\r\n\tpostUserData,\r\n\tpostUserMoney,\r\n\tsetBonusFlag,\r\n} from '../store/slices/ActionCreators'\r\n\r\nconst buttonMenuBg = {\r\n\tfontWeight: '900',\r\n\theight: '50px',\r\n\tmargin: '0 15px',\r\n\tbackgroundColor: 'rgba(0, 0, 255, 0.2)',\r\n\tcolor: 'black',\r\n}\r\n\r\nfunction EndBonusDialog(props: {\r\n\tshowDialog: boolean\r\n\tscore: number\r\n\tbestScore: number\r\n}) {\r\n\tconst labels: string[] = [\r\n\t\t'Эффективность работы',\r\n\t\t'Прогресс выполнения задач',\r\n\t\t'Качество работы',\r\n\t\t'Скорость достижения целей',\r\n\t\t'Уровень концентрации',\r\n\t\t'Соблюдение сроков',\r\n\t\t'Уровень удовлетворенности результатами',\r\n\t]\r\n\r\n\tconst [inputs, setInputs] = useState<Data>(\r\n\t\tArray.from({ length: labels.length }, (_, index) => ({\r\n\t\t\tlabel: `${labels[index]}`,\r\n\t\t\tvalue: '',\r\n\t\t}))\r\n\t)\r\n\r\n\tconst dispatch = useAppDispatch()\r\n\tconst user = useAppSelector((state: any) => state.userSlice.user)\r\n\r\n\tconst handleChange = (event: any, index: number) => {\r\n\t\tconst newInputs = [...inputs]\r\n\t\tnewInputs[index].value = event.target.value\r\n\t\tsetInputs(newInputs)\r\n\t}\r\n\r\n\tconst handleSubmitClick = () => {\r\n\t\tconsole.log(inputs)\r\n\t\tdispatch(postUserMoney(user.name, 10))\r\n\t\t//TODO: post запрос к серверу для сохранения показателей в БД\r\n\t\tdispatch(postUserData(user.name, inputs))\r\n\t\tdispatch(setBonusFlag(user.name, false))\r\n\t\twindow.location.href = '/flappy-bird-app'\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Dialog\r\n\t\t\topen={props.showDialog}\r\n\t\t\tdisableEscapeKeyDown\r\n\t\t\taria-labelledby='alert-dialog-title'\r\n\t\t\taria-describedby='alert-dialog-description'\r\n\t\t>\r\n\t\t\t<DialogContent>\r\n\t\t\t\t<DialogContentText id='alert-dialog-description'>\r\n\t\t\t\t\tУпс, похоже ты проиграл, но ничего заполни эту форму и получи\r\n\t\t\t\t\tгарантированный приз 10 очков ;)\r\n\t\t\t\t</DialogContentText>\r\n\t\t\t\t{inputs.map((input, index) => (\r\n\t\t\t\t\t<TextField\r\n\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\tautoFocus={index === 0}\r\n\t\t\t\t\t\tmargin='dense'\r\n\t\t\t\t\t\tid={`input${index + 1}`}\r\n\t\t\t\t\t\tlabel={input.label}\r\n\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\tvalue={input.value}\r\n\t\t\t\t\t\tonChange={event => handleChange(event, index)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t))}\r\n\t\t\t</DialogContent>\r\n\r\n\t\t\t<DialogActions>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tstyle={buttonMenuBg}\r\n\t\t\t\t\tonClick={handleSubmitClick}\r\n\t\t\t\t\tcolor='primary'\r\n\t\t\t\t>\r\n\t\t\t\t\tПодтвердить\r\n\t\t\t\t</Button>\r\n\t\t\t</DialogActions>\r\n\t\t</Dialog>\r\n\t)\r\n}\r\n\r\nexport default EndBonusDialog\r\n","import {\n\tButton,\n\tDialog,\n\tDialogActions,\n\tDialogContent,\n\tDialogContentText,\n} from '@material-ui/core'\nimport { useAppDispatch, useAppSelector } from '../hooks/redux'\nimport { postUserMoney } from '../store/slices/ActionCreators'\n\nconst buttonMenuBg = {\n\tfontWeight: '900',\n\theight: '50px',\n\tmargin: '0 15px',\n\tbackgroundColor: 'rgba(0, 0, 255, 0.2)',\n\tcolor: 'black',\n}\n\nfunction EndDialog(props: {\n\tshowDialog: boolean\n\tscore: number\n\tbestScore: number\n}) {\n\tconst dispatch = useAppDispatch()\n\tconst user = useAppSelector((state: any) => state.userSlice.user)\n\n\tconst handleToMainMenuClick = () => {\n\t\tdispatch(postUserMoney(user.name, props.score))\n\t\twindow.location.href = '/flappy-bird-app'\n\t}\n\n\tconst handleRetryClick = () => {\n\t\tdispatch(postUserMoney(user.name, props.score))\n\t\twindow.location.reload()\n\t}\n\n\treturn (\n\t\t<Dialog\n\t\t\topen={props.showDialog}\n\t\t\tdisableEscapeKeyDown\n\t\t\taria-labelledby='alert-dialog-title'\n\t\t\taria-describedby='alert-dialog-description'\n\t\t>\n\t\t\t<DialogContent>\n\t\t\t\t<DialogContentText id='alert-dialog-description'>\n\t\t\t\t\tРезультат: {props.score} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Лучший:{' '}\n\t\t\t\t\t{props.bestScore}\n\t\t\t\t</DialogContentText>\n\t\t\t</DialogContent>\n\n\t\t\t<DialogActions>\n\t\t\t\t<Button\n\t\t\t\t\tstyle={buttonMenuBg}\n\t\t\t\t\tonClick={handleToMainMenuClick}\n\t\t\t\t\tcolor='primary'\n\t\t\t\t>\n\t\t\t\t\tВ главное меню\n\t\t\t\t</Button>\n\t\t\t\t<Button style={buttonMenuBg} onClick={handleRetryClick} color='primary'>\n\t\t\t\t\tПопробовать ещё\n\t\t\t\t</Button>\n\t\t\t</DialogActions>\n\t\t</Dialog>\n\t)\n}\n\nexport default EndDialog\n","import EndBonusDialog from '../components/EndBonusDialog'\r\nimport EndDialog from '../components/EndDialog'\r\nimport { useAppSelector } from '../hooks/redux'\r\n\r\nfunction EndPage({\r\n\tshowModal,\r\n\tscore,\r\n\tbestScore,\r\n}: {\r\n\tshowModal: boolean\r\n\tscore: number\r\n\tbestScore: number\r\n}) {\r\n\tconst user = useAppSelector(state => state.userSlice.user)\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{user?.bonusFlag ? (\r\n\t\t\t\t<EndBonusDialog\r\n\t\t\t\t\tshowDialog={showModal}\r\n\t\t\t\t\tscore={score}\r\n\t\t\t\t\tbestScore={bestScore}\r\n\t\t\t\t/>\r\n\t\t\t) : (\r\n\t\t\t\t<EndDialog showDialog={showModal} score={score} bestScore={bestScore} />\r\n\t\t\t)}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default EndPage\r\n","import useEventListener from '@use-it/event-listener'\nimport { useEffect, useRef, useState } from 'react'\nimport * as constants from '../constants'\nimport EndPage from '../pages/EndPage'\nimport { Circle, Rectangle } from '../types'\n\n// ground\nlet groundX = 0\n\n// bird\nlet birdX = 60\nlet birdY = 120\nlet birdYSpeed = 0\n\n// pipes\nlet pipeGapBottomY = constants.PIPE_HEIGHT\nlet pipeX = constants.CANVAS_WIDTH\n\n// score\nlet score: number = 0\nlet bestScore: number = parseInt(localStorage.getItem('bestScore') || '0')\n\n// check collision between circle and rectangle\nconst checkCollision = (circle: Circle, rect: Rectangle) => {\n\tif (\n\t\tcircle.x + circle.radius >= rect.x &&\n\t\tcircle.x - circle.radius <= rect.x + rect.width\n\t) {\n\t\tif (\n\t\t\tcircle.y + circle.radius >= rect.y &&\n\t\t\tcircle.y - circle.radius <= rect.y + rect.height\n\t\t) {\n\t\t\t// TODO: IMPROVE COLLISION CHECK\n\t\t\treturn true\n\t\t}\n\t}\n\treturn false\n}\n\n// check if bird has touched a pipe\nconst touchedPipe = () => {\n\tconst birdHitbox: Circle = {\n\t\tx: birdX + constants.BIRD_WIDTH / 2,\n\t\ty: birdY + constants.BIRD_HEIGHT / 2 + 5,\n\t\tradius: 20,\n\t}\n\n\tconst upperPipe: Rectangle = {\n\t\tx: pipeX,\n\t\ty: 0,\n\t\twidth: constants.PIPE_WIDTH,\n\t\theight: pipeGapBottomY,\n\t}\n\n\tconst lowerPipe: Rectangle = {\n\t\tx: pipeX,\n\t\ty: pipeGapBottomY + constants.PIPE_GAP,\n\t\twidth: constants.PIPE_WIDTH,\n\t\theight:\n\t\t\tconstants.CANVAS_HEIGHT -\n\t\t\tconstants.HEIGHT_GROUND -\n\t\t\t(pipeGapBottomY + constants.PIPE_GAP),\n\t}\n\n\treturn (\n\t\tcheckCollision(birdHitbox, upperPipe) ||\n\t\tcheckCollision(birdHitbox, lowerPipe)\n\t)\n}\n\n// check if bird has touched the ground\nconst fallOut = () =>\n\tbirdY + constants.BIRD_HEIGHT >\n\tconstants.CANVAS_HEIGHT - constants.HEIGHT_GROUND\n\n// stop game\nconst reset = () => {\n\thasStarted = false\n\thasFinished = true\n}\n\nlet hasStarted = false\nlet hasFinished = false\nlet canGetScore = true\n\n//==============================================================================\n//==============================================================================\n//==============================================================================\n//==============================================================================\n//==============================================================================\n//==============================================================================\n//==============================================================================\n//==============================================================================\n//==============================================================================\n//==============================================================================\n//==============================================================================\n//==============================================================================\n//==============================================================================\n//==============================================================================\n//==============================================================================\n//==============================================================================\n\nfunction Game() {\n\tconst [showModal, setShowModal] = useState<boolean>(false)\n\tconst canvas = useRef<HTMLCanvasElement>(null)\n\n\t// bird jump\n\tconst jump = () => {\n\t\tif (hasFinished) {\n\t\t\treturn\n\t\t}\n\t\tif (!hasStarted) {\n\t\t\thasStarted = true\n\t\t}\n\t\tbirdYSpeed = constants.JUMP_SPEED\n\t}\n\n\t// enable space button\n\tconst handler = (key: any) => {\n\t\tif (hasFinished) {\n\t\t\treturn\n\t\t}\n\t\tif (key.code === 'Space') {\n\t\t\tif (!hasStarted) {\n\t\t\t\thasStarted = true\n\t\t\t}\n\t\t\tjump()\n\t\t}\n\t}\n\n\tuseEventListener('keypress', handler)\n\n\tconst draw = (context: CanvasRenderingContext2D) => {\n\t\t// draw background\n\t\tcontext.fillStyle = '#abfcff'\n\t\tcontext.fillRect(0, 0, constants.CANVAS_WIDTH, constants.CANVAS_HEIGHT)\n\n\t\t// draw clouds\n\t\tcontext.drawImage(\n\t\t\tconstants.CLOUDS,\n\t\t\tconstants.CLOUDS_X,\n\t\t\tconstants.CLOUDS_Y,\n\t\t\tconstants.CLOUDS_WIDTH,\n\t\t\tconstants.CLOUDS_HEIGHT\n\t\t)\n\n\t\t// draw ground\n\t\tcontext.drawImage(\n\t\t\tconstants.GROUND,\n\t\t\tgroundX,\n\t\t\tconstants.GROUND_Y,\n\t\t\tconstants.GROUND_WIDTH,\n\t\t\tconstants.GROUND_HEIGHT\n\t\t)\n\t\tcontext.drawImage(\n\t\t\tconstants.GROUND,\n\t\t\tgroundX + constants.CANVAS_WIDTH,\n\t\t\tconstants.GROUND_Y,\n\t\t\tconstants.GROUND_WIDTH,\n\t\t\tconstants.GROUND_HEIGHT\n\t\t)\n\n\t\t// draw bird\n\t\tcontext.drawImage(\n\t\t\tconstants.BIRD,\n\t\t\tbirdX,\n\t\t\tbirdY,\n\t\t\tconstants.BIRD_WIDTH,\n\t\t\tconstants.BIRD_HEIGHT\n\t\t)\n\n\t\t// draw pipes\n\t\tcontext.fillStyle = '#a6a6a6'\n\t\tcontext.fillRect(pipeX, 0, constants.PIPE_WIDTH, pipeGapBottomY)\n\t\tcontext.fillRect(\n\t\t\tpipeX,\n\t\t\tpipeGapBottomY + constants.PIPE_GAP,\n\t\t\tconstants.PIPE_WIDTH,\n\t\t\tconstants.CANVAS_HEIGHT -\n\t\t\t\tconstants.HEIGHT_GROUND -\n\t\t\t\t(pipeGapBottomY + constants.PIPE_GAP)\n\t\t)\n\t}\n\n\tuseEffect(() => {\n\t\tif (canvas.current) {\n\t\t\tconst context = canvas.current.getContext('2d')\n\t\t\tif (context) {\n\t\t\t\tsetInterval(() => {\n\t\t\t\t\t// dying\n\t\t\t\t\tif (touchedPipe() || fallOut()) {\n\t\t\t\t\t\tif (score > bestScore) {\n\t\t\t\t\t\t\tbestScore = score\n\t\t\t\t\t\t\tlocalStorage.setItem('bestScore', score.toString())\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsetShowModal(true)\n\t\t\t\t\t\treset()\n\t\t\t\t\t}\n\n\t\t\t\t\t// check if we should give another score\n\t\t\t\t\tif (canGetScore && birdX > pipeX + constants.PIPE_WIDTH) {\n\t\t\t\t\t\tcanGetScore = false\n\t\t\t\t\t\tscore++\n\t\t\t\t\t}\n\n\t\t\t\t\tdraw(context)\n\n\t\t\t\t\tif (!hasStarted) {\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\t// reset pipes\n\t\t\t\t\tif (pipeX < -constants.PIPE_WIDTH) {\n\t\t\t\t\t\tpipeX = constants.CANVAS_WIDTH\n\t\t\t\t\t\tpipeGapBottomY = constants.PIPE_GAP * Math.random()\n\t\t\t\t\t\tcanGetScore = true\n\t\t\t\t\t}\n\n\t\t\t\t\t// reset ground\n\t\t\t\t\tif (groundX <= -constants.CANVAS_WIDTH) {\n\t\t\t\t\t\tgroundX = 0\n\t\t\t\t\t}\n\n\t\t\t\t\t// draw scores\n\t\t\t\t\tcontext.fillStyle = 'black'\n\t\t\t\t\tcontext.font = '26px Roboto'\n\t\t\t\t\tcontext.fillText(\n\t\t\t\t\t\tscore.toString(),\n\t\t\t\t\t\tconstants.CANVAS_WIDTH / 2 - 15,\n\t\t\t\t\t\t50\n\t\t\t\t\t)\n\n\t\t\t\t\t// movements\n\t\t\t\t\tpipeX -= constants.SPEED\n\t\t\t\t\tgroundX -= constants.SPEED\n\t\t\t\t\tbirdY += birdYSpeed * (constants.INTERVAL / 1000)\n\t\t\t\t\tbirdYSpeed -= constants.FALL_SPEED * (constants.INTERVAL / 1000)\n\t\t\t\t}, constants.INTERVAL)\n\t\t\t}\n\t\t}\n\t\t//TODO: А можно ли сюда добавить в массив isGame, и при изменении рефрешить не страницу а useEffect будет сам ресетить\n\t}, [])\n\n\treturn (\n\t\t<div>\n\t\t\t<div onClick={jump} onKeyPress={jump}>\n\t\t\t\t<canvas\n\t\t\t\t\tref={canvas}\n\t\t\t\t\twidth={constants.CANVAS_WIDTH}\n\t\t\t\t\theight={constants.CANVAS_HEIGHT}\n\t\t\t\t/>\n\t\t\t\t<EndPage showModal={showModal} score={score} bestScore={bestScore} />\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default Game\n","import { Button, TextField } from '@material-ui/core'\r\nimport { useState } from 'react'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport { useAppDispatch } from '../hooks/redux'\r\nimport { login, registration } from '../store/slices/ActionCreators'\r\n\r\nconst Login: React.FC = () => {\r\n\tconst [name, setName] = useState<string>('')\r\n\tconst [password, setPassword] = useState<string>('')\r\n\tconst navigate = useNavigate()\r\n\r\n\tconst dispatch = useAppDispatch()\r\n\r\n\tconst handleLogin = () => {\r\n\t\tnavigate('/')\r\n\t\tdispatch(login(name, password))\r\n\t}\r\n\r\n\tconst handleRegistration = () => {\r\n\t\tnavigate('/')\r\n\t\tdispatch(registration(name, password))\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tstyle={{ display: 'flex', flexDirection: 'column', alignItems: 'center' }}\r\n\t\t>\r\n\t\t\t<TextField\r\n\t\t\t\tlabel='Имя'\r\n\t\t\t\ttype='text'\r\n\t\t\t\tvariant='outlined'\r\n\t\t\t\tvalue={name}\r\n\t\t\t\tonChange={e => setName(e.target.value)}\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tbackgroundColor: 'rgba(0, 0, 255, 0.2)',\r\n\t\t\t\t\twidth: '300px',\r\n\t\t\t\t\tmargin: '20px',\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\t\t<TextField\r\n\t\t\t\tlabel='Пароль'\r\n\t\t\t\ttype='password'\r\n\t\t\t\tvariant='outlined'\r\n\t\t\t\tvalue={password}\r\n\t\t\t\tonChange={e => setPassword(e.target.value)}\r\n\t\t\t\tstyle={{ backgroundColor: 'rgba(0, 0, 255, 0.2)', width: '300px' }}\r\n\t\t\t/>\r\n\t\t\t<div\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tdisplay: 'flex',\r\n\t\t\t\t\tflexDirection: 'row',\r\n\t\t\t\t\tgap: '10px',\r\n\t\t\t\t\tmarginBottom: '10px',\r\n\t\t\t\t\tjustifyContent: 'space-around',\r\n\t\t\t\t\tmarginTop: '30px',\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\tonClick={handleLogin}\r\n\t\t\t\t\tstyle={{ backgroundColor: 'rgba(0, 0, 255, 0.2)' }}\r\n\t\t\t\t>\r\n\t\t\t\t\tЛогин\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\tonClick={handleRegistration}\r\n\t\t\t\t\tstyle={{ backgroundColor: 'rgba(0, 0, 255, 0.2)' }}\r\n\t\t\t\t>\r\n\t\t\t\t\tРегистрация\r\n\t\t\t\t</Button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Login\r\n","import { Button, Grid, Typography } from '@material-ui/core'\r\nimport { useAppDispatch, useAppSelector } from '../hooks/redux'\r\nimport { logout } from '../store/slices/ActionCreators'\r\nimport { actionSlice } from '../store/slices/actionSlice'\r\n\r\nconst buttonMenuBg = {\r\n\tfontWeight: '900',\r\n\theight: '100px',\r\n\tbackgroundColor: 'rgba(0, 0, 255, 0.2)',\r\n\tcolor: 'black',\r\n}\r\n\r\nconst { setGame } = actionSlice.actions\r\n\r\nconst Menu: React.FC = () => {\r\n\tconst user = useAppSelector((state: any) => state.userSlice.user)\r\n\tconst dispatch = useAppDispatch()\r\n\r\n\tconst handleGameClick = () => {\r\n\t\tdispatch(setGame(true))\r\n\t\twindow.location.href = '/flappy-bird-app/game'\r\n\t}\r\n\r\n\tconst handleLogout = () => {\r\n\t\tdispatch(logout())\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tstyle={{\r\n\t\t\t\tdisplay: 'flex',\r\n\t\t\t\tflexDirection: 'column',\r\n\t\t\t\talignItems: 'center',\r\n\t\t\t\tmaxWidth: '300px',\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t<div style={{ padding: '40px 0' }}>\r\n\t\t\t\t<Typography variant='h5' style={{ fontWeight: '900' }}>\r\n\t\t\t\t\tЗдравствуйте, {user.name ? user.name : 'asd'}\r\n\t\t\t\t</Typography>\r\n\t\t\t\t<Typography\r\n\t\t\t\t\tstyle={{ fontSize: '18px', fontWeight: '400', textAlign: 'center' }}\r\n\t\t\t\t>\r\n\t\t\t\t\tУ вас {user.money ? user.money : 'пока что 0'} монет\r\n\t\t\t\t</Typography>\r\n\t\t\t</div>\r\n\r\n\t\t\t<Grid container spacing={6}>\r\n\t\t\t\t<Grid item xs={6}>\r\n\t\t\t\t\t<Button variant='contained' fullWidth style={buttonMenuBg}>\r\n\t\t\t\t\t\tМагазин (В разработке)\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item xs={6}>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tonClick={handleGameClick}\r\n\t\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\tstyle={buttonMenuBg}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tИграть\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item xs={6}>\r\n\t\t\t\t\t<Button variant='contained' fullWidth style={buttonMenuBg}>\r\n\t\t\t\t\t\tИнформация (В разработке)\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item xs={6}>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tonClick={handleLogout}\r\n\t\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\tstyle={buttonMenuBg}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tВыйти\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Menu\r\n","import { useEffect } from 'react'\nimport { BrowserRouter, Route, Routes } from 'react-router-dom'\nimport { useAppDispatch, useAppSelector } from '../hooks/redux'\nimport { checkAuth } from '../store/slices/ActionCreators'\nimport Game from './Game'\nimport Login from './Login'\nimport Menu from './Menu'\n\nfunction App() {\n\tconst { isAuth } = useAppSelector((state: any) => state.actionSlice)\n\tconst dispatch = useAppDispatch()\n\n\tuseEffect(() => {\n\t\tif (localStorage.getItem('token')) {\n\t\t\tdispatch(checkAuth())\n\t\t}\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [])\n\n\treturn (\n\t\t<BrowserRouter basename='/flappy-bird-app'>\n\t\t\t<Routes>\n\t\t\t\t{isAuth ? (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<Route path='/' element={<Menu />} />\n\t\t\t\t\t\t<Route path='/game' element={<Game />} />\n\t\t\t\t\t</>\n\t\t\t\t) : (\n\t\t\t\t\t<Route path='/' element={<Login />} />\n\t\t\t\t)}\n\t\t\t</Routes>\n\t\t</BrowserRouter>\n\t)\n}\n\nexport default App\n","import { combineReducers, configureStore } from '@reduxjs/toolkit'\r\nimport actionSlice from './slices/actionSlice'\r\nimport userSlice from './slices/userSlice'\r\n\r\nconst rootReducer = combineReducers({\r\n\tuserSlice,\r\n\tactionSlice,\r\n})\r\n\r\nexport const setupStore = () => {\r\n\treturn configureStore({\r\n\t\treducer: rootReducer,\r\n\t})\r\n}\r\n\r\nexport type RootState = ReturnType<typeof rootReducer>\r\nexport type AppStore = ReturnType<typeof setupStore>\r\nexport type AppDispatch = AppStore['dispatch']\r\n","import { createRoot } from 'react-dom/client'\nimport { Provider } from 'react-redux'\nimport App from './components/App'\nimport './index.scss'\nimport { setupStore } from './store/store'\n\nconst store = setupStore()\n\nconst container = document.getElementById('root')!\nconst root = createRoot(container)\n\nroot.render(\n\t<Provider store={store}>\n\t\t<App />\n\t</Provider>\n)\n"],"sourceRoot":""}